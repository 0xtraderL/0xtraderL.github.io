<!doctype html> <!-- `site.alt_lang` can specify a language different from the UI --> <html lang="en" > <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta http-equiv="X-UA-Compatible" content="ie=edge"> <!-- Language-specific meta tags --> <html lang="en"> <!-- SEO and title --> <title> Auto-Rebalance LP Tool on Sui | traderL Blog </title> <meta name="description" content="Sharing DeFi, crypto trading strategies, and blockchain technology"> <!-- Language alternates for SEO --> <link rel="alternate" hreflang="en" href="https://0xtraderl.github.io/defi/2025/06/28/auto-rebalance-sui-en/"> <link rel="alternate" hreflang="zh" href="https://0xtraderl.github.io/zh/defi/2025/06/28/auto-rebalance-sui-en/"> <link rel="alternate" hreflang="ja" href="https://0xtraderl.github.io/ja/defi/2025/06/28/auto-rebalance-sui-en/"> <link rel="alternate" hreflang="ko" href="https://0xtraderl.github.io/ko/defi/2025/06/28/auto-rebalance-sui-en/"> <!-- Multi-language CSS --> <link rel="stylesheet" href="/assets/css/language-posts.css"> <!-- Language switcher JavaScript --> <script src="/assets/js/language-switcher.js" defer></script> <!-- Custom styles for language support --> <style> .language-switcher { position: fixed; top: 20px; right: 20px; z-index: 1000; } @media (max-width: 768px) { .language-switcher { position: relative; top: 0; right: 0; margin: 10px; } } </style> <body> <aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"> <div class="profile-wrapper"> <div id="avatar" class="d-flex justify-content-center"> </div> <div class="profile-text"> <div class="site-title"> <a href="/">traderL Blog</a> </div> <div class="site-subtitle fst-italic">Sharing DeFi, crypto trading strategies, and blockchain technology</div> </div> </div> <nav class="flex-column flex-grow-1 w-100 ps-0"> <ul class="nav nav-pills flex-column" id="tabs"> <li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fas fa-stream"></i> <span>Categories</span> </a> </li> <li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fas fa-tags"></i> <span>Tags</span> </a> </li> <li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fas fa-archive"></i> <span>Archives</span> </a> </li> <li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fas fa-info-circle"></i> <span>About</span> </a> </li> </ul> </nav> <div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <div class="language-switcher"> <div class="dropdown"> <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false"> 🇺🇸 English </button> <ul class="dropdown-menu" aria-labelledby="languageDropdown"> <li> <a class="dropdown-item" href="/zh/"> 🇨🇳 中文 </a> </li> <li> <a class="dropdown-item" href="/ja/"> 🇯🇵 日本語 </a> </li> <li> <a class="dropdown-item" href="/ko/"> 🇰🇷 한국어 </a> </li> </ul> </div> </div> <style> .language-switcher { display: inline-block; margin-left: 10px; } .language-switcher .dropdown-toggle { border: 1px solid #6c757d; background: transparent; color: inherit; font-size: 0.875rem; padding: 0.25rem 0.75rem; } .language-switcher .dropdown-toggle:hover { background-color: rgba(108, 117, 125, 0.1); } .language-switcher .dropdown-menu { min-width: 120px; border: 1px solid #dee2e6; border-radius: 0.375rem; box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); } .language-switcher .dropdown-item { padding: 0.5rem 1rem; font-size: 0.875rem; color: inherit; text-decoration: none; } .language-switcher .dropdown-item:hover { background-color: rgba(108, 117, 125, 0.1); } @media (max-width: 576px) { .language-switcher { margin-left: 5px; } .language-switcher .dropdown-toggle { font-size: 0.8rem; padding: 0.2rem 0.5rem; } } </style> <div class="social-links"> <a href="" aria-label="" target="_blank" rel="noopener"> <i class="fab fa-"></i> </a> </div> </div> </aside> <div id="main-wrapper" class="d-flex justify-content-center"> <div class="container d-flex flex-column px-xxl-5"> <!-- The Top Bar --> <header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"> <div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" > <nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Auto-Rebalance LP Tool on Sui</span> </nav> <!-- endof #breadcrumb --> <button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button> <div id="topbar-title"> Post </div> <button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button> </div> </header> <div class="row flex-grow-1"> <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"> <!-- Refactor the HTML structure --> <!-- In order to allow a wide table to scroll horizontally, we suround the markdown table with `<div class="table-wrapper">` and `</div>` --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --> <!-- Change the icon of checkbox --> <!-- Handle images --> <!-- take out classes --> <!-- lazy-load images --> <!-- make sure the `<img>` is wrapped by `<a>` --> <!-- create the image wrapper --> <!-- combine --> <!-- take out classes --> <!-- lazy-load images --> <!-- make sure the `<img>` is wrapped by `<a>` --> <!-- create the image wrapper --> <!-- combine --> <!-- Add header for code snippets --> <!-- Create heading anchors --> <!-- return --> <article class="px-1" data-toc="false"> <header> <h1 data-toc-skip>Auto-Rebalance LP Tool on Sui</h1> <div class="post-meta text-muted"> <!-- published date --> <span> Posted <!-- Date format snippet See: ${JS_ROOT}/utils/locale-dateime.js --> <time data-ts="1751083200" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jun 28, 2025 </time> </span> <!-- lastmod date --> <div class="d-flex justify-content-between"> <!-- author(s) --> <span> By <em> <a href=""></a> </em> </span> <div> <!-- pageviews --> <!-- read time --> <!-- Calculate the post's reading time, and display the word count in tooltip --> <!-- words per minute --> <!-- return element --> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="619 words" > <em>3 min</em> read</span> </div> </div> </div> </header> <div class="content"> <p>When providing liquidity to concentrated liquidity pools to earn fee income, you often encounter price out-of-range situations, where the price leaves the LP liquidity position’s price range. In this case, if you don’t manually re-establish the position, you won’t earn any returns. Manual position rebalancing is somewhat tedious. Assuming the invested capital remains unchanged, based on the remaining token quantities from the original position:</p> <ol> <li>Close the original position and withdraw all liquidity - this transaction requires one signature.</li> <li>Consider the new position’s price range, then calculate the required amounts of tokens A and B, and swap the corresponding amounts of A or B - this swap transaction requires one signature.</li> <li>Based on the quantities obtained from step 2 and the preset price range, re-add liquidity to establish the position - this requires one signature.</li> </ol> <p>Manual LP rebalancing requires the above 3 steps, and step 2 is difficult to calculate without tools. There are now many auto-balancing on-chain protocols like AlphaFi that can automatically rebalance when out of range, but their price ranges are determined by the protocol and cannot be adjusted according to your own strategy. Usually, the price ranges are quite large and only suitable for a few mainstream pools, making them more suitable for lazy users who don’t want to bother. I rarely use such protocols.</p> <h2 id="sui-ptb-feature-enables-one-click-rebalancing"><span class="me-2">Sui PTB Feature Enables One-Click Rebalancing</span><a href="#sui-ptb-feature-enables-one-click-rebalancing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>On Ethereum, I really don’t know how to solve this problem off-chain without using on-chain contracts. But on Sui, this problem is not a problem. Here I’ll praise Sui - Sui is truly a blockchain born to solve real problems, very suitable for developing various applications with low gas costs, high security, fast speed, and many features like sponsored transactions, ZkLogin, PTB programming, etc., which can easily implement user-friendly innovative apps.</p> <p>Let me focus on the PTB feature, which is indeed very powerful:</p> <p>PTB (Programmable Transaction Block) simply means that when building transactions off-chain, you can package multiple operations at once. It looks ordinary, but the actual application scenarios are very wide.</p> <p><strong>Problems with traditional on-chain operations:</strong></p> <ul> <li>Complex operations need to be decomposed into multiple independent transactions</li> <li>Each transaction requires separate signature confirmation, making the process tedious</li> <li>If any step fails, previous operations may have already been executed</li> <li>Gas fees accumulate, increasing costs</li> </ul> <p><strong>PTB advantages:</strong></p> <ul> <li>Multiple operations are assembled into one transaction block off-chain</li> <li>One signature, either all succeed or all fail</li> <li>Atomic execution, avoiding intermediate states</li> <li>Significantly reduced gas fees since it’s essentially a single transaction</li> </ul> <p>A practical example: LP rebalancing operation, traditional EVM way requires:</p> <ol> <li>Withdraw liquidity → Sign confirmation → Wait</li> <li>Swap tokens to adjust ratio → Sign confirmation → Wait</li> <li>Re-add liquidity → Sign confirmation → Wait</li> </ol> <p>Using PTB:</p> <ol> <li>Build off-chain: <ul> <li>Close position and withdraw liquidity to get withdrawn token amounts (transaction hasn’t executed yet, tokens are still in this transaction and can be passed to the next operation)</li> <li>Swap based on token amounts from the previous step</li> <li>Re-create position based on amounts from the swap step</li> </ul> </li> <li>Submit the above transaction with one signature</li> <li>Atomic execution on-chain</li> </ol> <p>Using PTB, you can even perform flash loan arbitrage off-chain, which on Ethereum systems can only be done by developing contracts.</p> <p>This is why I can implement one-click rebalancing on Sui, while on other chains, such operations have high costs and complexity.</p> <h2 id="my-workflow"><span class="me-2">My Workflow</span><a href="#my-workflow" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <ol> <li>Initially invest capital to create position</li> <li>Monitor position status, send Telegram notifications when out of range</li> <li>After going out of range, use rebalancing workflow to keep the original position earning returns in the current price range</li> <li>Observe historical position returns and adjust position price amplitude</li> </ol> <p>LP profit statistics: <a href="/assets/img/posts/2025-06-28/1.webp" class="popup img-link shimmer"><img src="/assets/img/posts/2025-06-28/1.webp" alt="LP Profit Statistics" loading="lazy"></a></p> <p>LP rebalancing execution process: <a href="/assets/img/posts/2025-06-28/3.png" class="popup img-link shimmer"><img src="/assets/img/posts/2025-06-28/3.png" alt="LP Rebalancing Process" loading="lazy"></a></p> <p>Workflow tools used:</p> <ul> <li>Position out-of-range monitoring</li> <li>One-click rebalancing <ul> <li><a href="https://app.kamechan.xyz/workflow/traderL/bluefin-spot-automated-percentage-based-rebalancing">Bluefin</a></li> <li><a href="https://app.kamechan.xyz/workflow/traderL/mmt-automated-liquidity-position-rebalancing">Momentum</a></li> </ul> </li> <li>Historical position returns (LP vs Holding) <ul> <li><a href="https://app.kamechan.xyz/workflow/traderL/bluefin-spot-yield-comparison-lp-vs-holding">Bluefin</a></li> <li><a href="https://app.kamechan.xyz/workflow/traderL/momentum-pool-yield-comparison-lp-vs-holding">Momentum</a></li> </ul> </li> </ul> </div> <div class="post-tail-wrapper text-muted"> <!-- categories --> <div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/defi/">DeFi</a> </div> <!-- tags --> <div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/defi/" class="post-tag no-text-decoration" >defi</a> <a href="/tags/bluefin/" class="post-tag no-text-decoration" >bluefin</a> <a href="/tags/sui/" class="post-tag no-text-decoration" >sui</a> <a href="/tags/clmm/" class="post-tag no-text-decoration" >clmm</a> </div> <div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " > <div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author. </div> <!-- Post sharing snippet --> <div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span> </div> </div> <!-- .post-tail-bottom --> </div> <!-- div.post-tail-wrapper --> </article> </main> <!-- panel --> <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"> <div class="access"> <!-- Get 5 last posted/updated posts --> <section id="access-lastmod"> <h2 class="panel-heading">Recently Updated</h2> <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"> <li class="text-truncate lh-lg"> <a href="/defi/2025/06/28/auto-rebalance-sui-en/">Auto-Rebalance LP Tool on Sui</a> </li> <li class="text-truncate lh-lg"> <a href="/ja/ja/defi/2025/06/28/auto-rebalance-sui/">Sui上でのLP自動リバランスツール</a> </li> <li class="text-truncate lh-lg"> <a href="/ko/ko/defi/2025/06/28/auto-rebalance-sui/">Sui에서 LP 자동 리밸런싱 도구</a> </li> <li class="text-truncate lh-lg"> <a href="/zh/zh/defi/2025/06/28/auto-rebalance-sui/">在sui上LP自动再平衡工具</a> </li> </ul> </section> <!-- #access-lastmod --> <!-- The trending tags list --> <section> <h2 class="panel-heading">Trending Tags</h2> <div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/bluefin/">bluefin</a> <a class="post-tag btn btn-outline-primary" href="/tags/clmm/">clmm</a> <a class="post-tag btn btn-outline-primary" href="/tags/defi/">defi</a> <a class="post-tag btn btn-outline-primary" href="/tags/sui/">sui</a> </div> </section> </div> </aside> </div> <div class="row"> <!-- tail --> <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post. --> <!-- The total size of related posts --> <!-- An random integer that bigger than 0 --> <!-- Equals to TAG_SCORE / {max_categories_hierarchy} --> <aside id="related-posts" aria-labelledby="related-label"> <h3 class="mb-4" id="related-label">Further Reading</h3> <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"> <article class="col"> <a href="/zh/zh/defi/2025/06/28/auto-rebalance-sui/" class="post-preview card h-100"> <div class="card-body"> <!-- Date format snippet See: ${JS_ROOT}/utils/locale-dateime.js --> <time data-ts="1751083200" data-df="ll" > Jun 28, 2025 </time> <h4 class="pt-0 my-2">在sui上LP自动再平衡工具</h4> <div class="text-muted"> <p>在集中流动性池组LP赚手续费收益时，经常会遇到价格越界, 即脱离LP流动性仓位的价格区间的情况。这时候不去手动重新建立仓位的话，收不到任何收益。手动重组仓位有点繁琐，假设要投入的资金不变，按原有仓位的剩余币种数量计算： 关闭原有的仓位，提取所有流动性, 这里的交易需要签名一次。 考虑新仓位的价格区间，然后计算所需要的币种A和B，再swap 对应数量的A或者B, 这里进行swap交...</p> </div> </div> </a> </article> <article class="col"> <a href="/ko/ko/defi/2025/06/28/auto-rebalance-sui/" class="post-preview card h-100"> <div class="card-body"> <!-- Date format snippet See: ${JS_ROOT}/utils/locale-dateime.js --> <time data-ts="1751083200" data-df="ll" > Jun 28, 2025 </time> <h4 class="pt-0 my-2">Sui에서 LP 자동 리밸런싱 도구</h4> <div class="text-muted"> <p>집중 유동성 풀에서 LP를 구성하여 수수료 수익을 얻을 때, 가격이 범위를 벗어나는 상황, 즉 LP 유동성 포지션의 가격 범위를 벗어나는 경우를 자주 접하게 됩니다. 이 경우 수동으로 포지션을 재구축하지 않으면 수익을 얻을 수 없습니다. 수동 포지션 리밸런싱은 다소 번거롭습니다. 투입 자금이 변하지 않는다고 가정하고, 기존 포지션의 남은 토큰 수량을 ...</p> </div> </div> </a> </article> <article class="col"> <a href="/ja/ja/defi/2025/06/28/auto-rebalance-sui/" class="post-preview card h-100"> <div class="card-body"> <!-- Date format snippet See: ${JS_ROOT}/utils/locale-dateime.js --> <time data-ts="1751083200" data-df="ll" > Jun 28, 2025 </time> <h4 class="pt-0 my-2">Sui上でのLP自動リバランスツール</h4> <div class="text-muted"> <p>集中流動性プールでLPを組んで手数料収益を得る際、価格が範囲外になること、つまりLP流動性ポジションの価格範囲から外れる状況によく遭遇します。この場合、手動でポジションを再構築しなければ、収益を得ることができません。手動でのポジションリバランスは少し面倒です。投入資金が変わらないと仮定して、元のポジションの残りトークン数量に基づいて計算すると： 元のポジションを閉じて、すべての流動性...</p> </div> </div> </a> </article> </nav> </aside> <!-- #related-posts --> <!-- Navigation buttons at the bottom of the post. --> <nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <div class="btn btn-outline-primary disabled" aria-label="Older"> <p>-</p> </div> <a href="/ja/ja/defi/2025/06/28/auto-rebalance-sui/" class="btn btn-outline-primary" aria-label="Newer" > <p>Sui上でのLP自動リバランスツール</p> </a> </nav> <!-- The Footer --> <footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " > <p>© <time>2025</time> <em class="fst-normal"></em>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span> </p> <p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.0" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. </p> </footer> </div> </div> <!-- The Search results --> <div id="search-result-wrapper" class="d-flex justify-content-center d-none"> <div class="col-11 content"> <div id="search-hints"> <!-- The trending tags list --> <section> <h2 class="panel-heading">Trending Tags</h2> <div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/bluefin/">bluefin</a> <a class="post-tag btn btn-outline-primary" href="/tags/clmm/">clmm</a> <a class="post-tag btn btn-outline-primary" href="/tags/defi/">defi</a> <a class="post-tag btn btn-outline-primary" href="/tags/sui/">sui</a> </div> </section> </div> <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div> </div> </div> </div> <aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button> </aside> </div> <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div> <!-- Embedded scripts --> <!-- The comments switcher --> <!-- Jekyll Simple Search loader See: <https://github.com/christian-fei/Simple-Jekyll-Search> --> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: ' <article class="px-1 px-sm-2 px-lg-4 px-xl-0"> <header> <h2><a href="{url}">{title}</a></h2> <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags} </div> </header> <p>{content}</p> </article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script> </body> </html>
