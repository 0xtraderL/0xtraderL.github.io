{% assign current_lang = page.lang | default: site.default_lang %}

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <div class="profile-wrapper">
    <div id="avatar" class="d-flex justify-content-center">
      {% if site.avatar %}
        <img src="{{ site.avatar | relative_url }}" alt="avatar" onerror="this.style.display='none'">
      {% endif %}
    </div>

    <div class="profile-text">
      <div class="site-title">
        <a href="{{ '/' | relative_url }}">{{ site.t[current_lang].title | default: site.title }}</a>
      </div>
      <div class="site-subtitle fst-italic">{{ site.t[current_lang].description | default: site.description }}</div>
    </div>
  </div>

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav nav-pills flex-column" id="tabs">
      {% for tab in site.tabs %}
        {% assign tab_lang = tab.lang | default: 'en' %}
        {% if tab_lang == current_lang %}
          <li class="nav-item">
            <a href="{{ tab.url | relative_url }}" class="nav-link">
              <i class="{{ tab.icon }}"></i>
              <span>{{ tab.title }}</span>
            </a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap align-items-center w-100">
    {% include language-switcher.html %}
    
    {% if site.theme_mode %}
      <button class="btn btn-link ps-0 pe-2 text-decoration-none" id="mode-toggle" aria-label="Switch Mode">
        <i class="fas fa-adjust"></i>
      </button>
    {% endif %}

    {% if site.social %}
      <div class="social-links">
        {% for entry in site.social %}
          {% capture url %}
            {%- if entry.type == 'github' -%}
              https://github.com/{{ entry.username }}
            {%- elsif entry.type == 'twitter' -%}
              https://twitter.com/{{ entry.username }}
            {%- elsif entry.type == 'email' -%}
              mailto:{{ entry.username }}
            {%- elsif entry.type == 'linkedin' -%}
              https://linkedin.com/in/{{ entry.username }}
            {%- else -%}
              {{ entry.url }}
            {%- endif -%}
          {% endcapture %}
          
          <a href="{{ url | strip }}" aria-label="{{ entry.type }}" {% if entry.type != 'email' %}target="_blank" rel="noopener"{% endif %}>
            <i class="{{ entry.icon | default: 'fab fa-' | append: entry.type }}"></i>
          </a>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</aside> 